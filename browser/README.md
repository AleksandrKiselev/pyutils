# Image Viewer

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–ª–ª–µ–∫—Ü–∏–µ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìÅ **–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –ø–∞–ø–∫–∞–º** - –ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ø–∞–ø–æ–∫
- üîç **–ú–æ—â–Ω—ã–π –ø–æ–∏—Å–∫** - –ø–æ–∏—Å–∫ –ø–æ –ø—Ä–æ–º–ø—Ç–∞–º, —Ç–µ–≥–∞–º, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É (–æ—Ç–º–µ—á–µ–Ω–Ω—ã–µ/–Ω–µ–æ—Ç–º–µ—á–µ–Ω–Ω—ã–µ), –ø–æ–∏—Å–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- üè∑Ô∏è **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–∞–º–∏** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–≥–æ–≤ —Å –ø–æ–º–æ—â—å—é WD14 Tagger, —Ä—É—á–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚≠ê **–†–µ–π—Ç–∏–Ω–≥** - –æ—Ü–µ–Ω–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –æ—Ç 1 –¥–æ 5 –∑–≤–µ–∑–¥
- üîñ **–ó–∞–∫–ª–∞–¥–∫–∏** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- ‚≠ê **–ò–∑–±—Ä–∞–Ω–Ω–æ–µ** - –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –ø–∞–ø–∫—É
- üìä **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞** - –ø–æ –¥–∞—Ç–µ, –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞, –ø—Ä–æ–º–ø—Ç—É, —Ä–µ–π—Ç–∏–Ω–≥—É, —Ç–µ–≥–∞–º, —Ä–∞–∑–º–µ—Ä—É, —Ö–µ—à—É, —Å–ª—É—á–∞–π–Ω–∞—è
- üñºÔ∏è **–ú–∏–Ω–∏–∞—Ç—é—Ä—ã** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –º–∏–Ω–∏–∞—Ç—é—Ä –≤ —Ñ–æ—Ä–º–∞—Ç–µ AVIF
- üíæ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - SQLite –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Å –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
- üéØ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤ –∏–∑ PNG –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ conda –æ–∫—Ä—É–∂–µ–Ω–∏–µ
conda env create -f ../environment.yml

# –ò–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
conda env update -f ../environment.yml --prune

# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ
conda activate neural-networks
```

## –ó–∞–ø—É—Å–∫

```bash
cd browser
python backend/app.py
```

–ò–ª–∏ —á–µ—Ä–µ–∑ bat-—Ñ–∞–π–ª:
```bash
app.bat
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://127.0.0.1:5000

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ `config.json`:

```json
{
    "image_folder": "–ø—É—Ç—å/–∫/–ø–∞–ø–∫–µ/—Å/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏",
    "favorites_folder": "–ø—É—Ç—å/–∫/–ø–∞–ø–∫–µ/–∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ",
    "thumbnail_size": 512,
    "items_per_page": 20,
    "allowed_extensions": [".png", ".jpg", ".jpeg", ".webp"],
    "metadata_folder": ".metadata",
    "database_name": "metadata.db",
    "favorite_tag": "favorite",
    "thumbnail_quality": 85,
    "auto_tag_enabled": true,
    "auto_tag_threshold": 0.3771
}
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

- `image_folder` - –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `favorites_folder` - –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ –¥–ª—è –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `thumbnail_size` - —Ä–∞–∑–º–µ—Ä –º–∏–Ω–∏–∞—Ç—é—Ä –≤ –ø–∏–∫—Å–µ–ª—è—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 512)
- `items_per_page` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 20)
- `allowed_extensions` - —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π —Ñ–∞–π–ª–æ–≤
- `metadata_folder` - –∏–º—è –ø–∞–ø–∫–∏ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `.metadata`)
- `database_name` - –∏–º—è —Ñ–∞–π–ª–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `metadata.db`)
- `favorite_tag` - —Ç–µ–≥, –¥–æ–±–∞–≤–ª—è–µ–º—ã–π –∫ –∏–∑–±—Ä–∞–Ω–Ω—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `favorite`)
- `thumbnail_quality` - –∫–∞—á–µ—Å—Ç–≤–æ –º–∏–Ω–∏–∞—Ç—é—Ä AVIF –æ—Ç 1 –¥–æ 100 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 85)
- `auto_tag_enabled` - –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Ç–µ–≥–æ–≤
- `auto_tag_threshold` - –ø–æ—Ä–æ–≥ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–≥–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 0.3771)

## –ü–æ–∏—Å–∫

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏:

- `text` - –ø–æ–∏—Å–∫ –ø–æ –ø—Ä–æ–º–ø—Ç—É –≤ —Ç–µ–∫—É—â–µ–π –ø–∞–ø–∫–µ
- `g:text` - –≥–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –ø—Ä–æ–º–ø—Ç—É –≤–æ –≤—Å–µ—Ö –ø–∞–ø–∫–∞—Ö
- `t:tag1,tag2` - –ø–æ–∏—Å–∫ –ø–æ —Ç–µ–≥–∞–º –≤ —Ç–µ–∫—É—â–µ–π –ø–∞–ø–∫–µ
- `g:t:tag1,tag2` - –≥–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ —Ç–µ–≥–∞–º
- `u:` - —Ç–æ–ª—å–∫–æ –Ω–µ–æ—Ç–º–µ—á–µ–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `u:text` - –Ω–µ–æ—Ç–º–µ—á–µ–Ω–Ω—ã–µ —Å —Ç–µ–∫—Å—Ç–æ–º –≤ –ø—Ä–æ–º–ø—Ç–µ
- `c:` - —Ç–æ–ª—å–∫–æ –æ—Ç–º–µ—á–µ–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `c:text` - –æ—Ç–º–µ—á–µ–Ω–Ω—ã–µ —Å —Ç–µ–∫—Å—Ç–æ–º –≤ –ø—Ä–æ–º–ø—Ç–µ
- `dh:` - –¥—É–±–ª–∏–∫–∞—Ç—ã –ø–æ —Ö–µ—à—É —Ñ–∞–π–ª–∞
- `dp:` - –¥—É–±–ª–∏–∫–∞—Ç—ã –ø–æ –ø—Ä–æ–º–ø—Ç—É

## –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞

–î–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏:
- `date` - –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è/–∏–∑–º–µ–Ω–µ–Ω–∏—è
- `filename` - –ø–æ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
- `prompt` - –ø–æ –ø—Ä–æ–º–ø—Ç—É
- `rating` - –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É
- `tags` - –ø–æ —Ç–µ–≥–∞–º
- `size` - –ø–æ —Ä–∞–∑–º–µ—Ä—É —Ñ–∞–π–ª–∞
- `hash` - –ø–æ —Ö–µ—à—É —Ñ–∞–π–ª–∞
- `random` - —Å–ª—É—á–∞–π–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞

–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é (`asc`) –∏–ª–∏ —É–±—ã–≤–∞–Ω–∏—é (`desc`).

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–≥–æ–≤

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ–≥–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É—è **WD14 Tagger** –æ—Ç SmilingWolf.

### WD14 Tagger

–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å [SmilingWolf/wd-v1-4-swinv2-tagger-v2](https://huggingface.co/SmilingWolf/wd-v1-4-swinv2-tagger-v2) –¥–ª—è –∞–Ω–∏–º–µ/—Ö–µ–Ω—Ç–∞–π, –æ–±—É—á–µ–Ω–Ω–∞—è –Ω–∞ Danbooru. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å Hugging Face –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ config.json:

```json
{
    "auto_tag_enabled": true,
    "auto_tag_threshold": 0.3771
}
```

- `auto_tag_enabled` - –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Ç–µ–≥–æ–≤
- `auto_tag_threshold` - –ø–æ—Ä–æ–≥ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–≥–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.3771 - –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Å–æ–≥–ª–∞—Å–Ω–æ README –º–æ–¥–µ–ª–∏)

–ú–æ–¥–µ–ª—å –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è).

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–≥–æ–≤ —á–µ—Ä–µ–∑ WD14 Tagger, –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
2. –ú–æ–¥–µ–ª—å –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–∞–º–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–µ–≥–∏ —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é –≤—ã—à–µ –ø–æ—Ä–æ–≥–∞
3. –¢–µ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Ä—É—á–Ω—É—é

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SQLite –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö:
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ –¥–∏—Å–∫ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π (debounce) –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ: `{image_folder}/{metadata_folder}/{database_name}`
- –•—Ä–∞–Ω–∏—Ç: –ø—Ä–æ–º–ø—Ç—ã, —Ç–µ–≥–∏, —Ä–µ–π—Ç–∏–Ω–≥, —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∏, —Ö–µ—à–∏, –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º –∏ –º–∏–Ω–∏–∞—Ç—é—Ä—ã, –∑–∞–∫–ª–∞–¥–∫–∏

## –ú–∏–Ω–∏–∞—Ç—é—Ä—ã

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –º–∏–Ω–∏–∞—Ç—é—Ä –≤ —Ñ–æ—Ä–º–∞—Ç–µ AVIF
- –ú–∏–Ω–∏–∞—Ç—é—Ä—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (–ø–æ–ª–µ `thumbnail_data`)
- –ö–∞—á–µ—Å—Ç–≤–æ –∏ —Ä–∞–∑–º–µ—Ä –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ `config.json`

## –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–î–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç `build_database.py`. –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞–ø–∫—É, —É–∫–∞–∑–∞–Ω–Ω—É—é –≤ `config.json` (–ø–∞—Ä–∞–º–µ—Ç—Ä `image_folder`), –∏ –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞.

### –ó–∞–ø—É—Å–∫

```bash
cd browser
python backend/build_database.py
```

–ò–ª–∏ —á–µ—Ä–µ–∑ bat-—Ñ–∞–π–ª:
```bash
build_database.bat
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

- `--workers N` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —è–¥–µ—Ä CPU * 4)
- `--batch-size N` - —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 100)
- `--skip-existing` - –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö —É–∂–µ –µ—Å—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏ –º–∏–Ω–∏–∞—Ç—é—Ä—ã

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü—É—Ç—å –∫ –ø–∞–ø–∫–µ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –±–µ—Ä–µ—Ç—Å—è –∏–∑ `config.json` (–ø–∞—Ä–∞–º–µ—Ç—Ä `image_folder`), –ø–æ—ç—Ç–æ–º—É –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è —É–∫–∞–∑—ã–≤–∞—Ç—å –µ–≥–æ –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ.

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```bash
# –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—É—Å–∫ - —Å—Ç—Ä–æ–∏—Ç –ë–î –¥–ª—è –≤—Å–µ—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ –ø–∞–ø–∫–∏ –≤ config.json
python backend/build_database.py

# –° —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ—Ç–æ–∫–æ–≤
python backend/build_database.py --workers 8

# –ü—Ä–æ–ø—É—Å–∫ —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
python backend/build_database.py --skip-existing

# –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
python backend/build_database.py --batch-size 200 --workers 4

# –ß–µ—Ä–µ–∑ bat-—Ñ–∞–π–ª (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–¥–∞–Ω—ã –≤ bat-—Ñ–∞–π–ª–µ)
build_database.bat
```

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

1. **–°–æ–∑–¥–∞–µ—Ç –±—ç–∫–∞–ø –ë–î** - –µ—Å–ª–∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è —Å –¥–∞—Ç–æ–π –∏ –≤—Ä–µ–º–µ–Ω–µ–º
2. **–ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ë–î** - —á–∏—Ç–∞–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —Å –¥–∏—Å–∫–∞ –≤ –ø–∞–º—è—Ç—å (–µ—Å–ª–∏ –æ–Ω–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
3. **–û—á–∏—â–∞–µ—Ç –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –∑–∞–ø–∏—Å–∏** - —É–¥–∞–ª—è–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ñ–∞–π–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±–æ–ª—å—à–µ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç
4. **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** - —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –æ–±—Ö–æ–¥–∏—Ç –ø–∞–ø–∫—É –∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
   - –ò–∑–≤–ª–µ–∫–∞–µ—Ç –ø—Ä–æ–º–ø—Ç—ã –∏–∑ PNG –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
   - –í—ã—á–∏—Å–ª—è–µ—Ç MD5 —Ö–µ—à–∏ —Ñ–∞–π–ª–æ–≤
   - –ü–æ–ª—É—á–∞–µ—Ç —Ä–∞–∑–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ WD14 Tagger (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ –≤ config.json)
   - –°–æ–∑–¥–∞–µ—Ç –º–∏–Ω–∏–∞—Ç—é—Ä—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ AVIF
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ –ë–î –≤ –ø–∞–º—è—Ç–∏
5. **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ë–î –Ω–∞ –¥–∏—Å–∫** - –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –¥–∏—Å–∫

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ù–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ** - –µ—Å–ª–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —É–∂–µ –µ—Å—Ç—å, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏—Ö ID –∏ –¥–∞–Ω–Ω—ã–µ
- **–î–æ–±–∞–≤–ª—è–µ—Ç –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —á–∞—Å—Ç–∏** - –µ—Å–ª–∏ –µ—Å—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, –Ω–æ –Ω–µ—Ç –º–∏–Ω–∏–∞—Ç—é—Ä—ã, —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –º–∏–Ω–∏–∞—Ç—é—Ä–∞
- **–ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å –ø–æ–º–æ—â—å—é tqdm
- **–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
- **–ë–∞—Ç—á–µ–≤–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –±–∞—Ç—á–∞–º–∏ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏

–°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ `config.json`**:
- `image_folder` - –ø–∞–ø–∫–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- `metadata_folder` - –ø–∞–ø–∫–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ë–î (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `.metadata`)
- `database_name` - –∏–º—è —Ñ–∞–π–ª–∞ –ë–î (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `metadata.db`)
- `thumbnail_size` - —Ä–∞–∑–º–µ—Ä –º–∏–Ω–∏–∞—Ç—é—Ä –≤ –ø–∏–∫—Å–µ–ª—è—Ö
- `thumbnail_quality` - –∫–∞—á–µ—Å—Ç–≤–æ –º–∏–Ω–∏–∞—Ç—é—Ä (1-100)
- `auto_tag_enabled` - –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Ç–µ–≥–æ–≤
- `auto_tag_threshold` - –ø–æ—Ä–æ–≥ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–≥–∞
- `allowed_extensions` - —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π —Ñ–∞–π–ª–æ–≤

**–í–∞–∂–Ω–æ:** –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Å–∫—Ä–∏–ø—Ç–∞ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `config.json` —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏.
