# Тесты для бэкенда приложения просмотра изображений

## Структура тестов

Тесты организованы по модулям:
- `test_exceptions.py` - тесты для кастомных исключений
- `test_validators.py` - тесты для валидации входных данных
- `test_config.py` - тесты для конфигурации
- `test_progress.py` - тесты для отслеживания прогресса
- `test_paths.py` - тесты для работы с путями
- `test_tag.py` - тесты для работы с тегами
- `test_metadata.py` - тесты для работы с метаданными
- `test_image.py` - тесты для обработки изображений
- `test_services.py` - тесты для бизнес-логики сервисов
- `test_routes.py` - тесты для API маршрутов

## Установка зависимостей

```bash
pip install -r requirements.txt
```

## Запуск тестов

### Запуск всех тестов

```bash
pytest
```

### Запуск с покрытием кода

```bash
pytest --cov=. --cov-report=html
```

### Запуск конкретного файла тестов

```bash
pytest tests/test_validators.py
```

### Запуск конкретного теста

```bash
pytest tests/test_validators.py::TestValidateSearchQuery::test_global_search
```

### Запуск с подробным выводом

```bash
pytest -v
```

## Фикстуры

В `conftest.py` определены общие фикстуры:
- `temp_dir` - временная директория для тестов
- `temp_image_folder` - временная папка для изображений
- `temp_metadata_folder` - временная папка для метаданных
- `sample_config` - тестовая конфигурация
- `sample_image_path` - путь к тестовому изображению
- `mock_config` - автоматическое мокирование конфигурации (применяется ко всем тестам)

## Примечания

- Все тесты используют временные директории, которые автоматически удаляются после выполнения
- Конфигурация автоматически мокируется для всех тестов через фикстуру `mock_config`
- Тесты не требуют реальных файлов изображений в рабочей директории

